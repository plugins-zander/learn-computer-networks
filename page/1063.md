# 差错检测

在传输过程中可能会产生比特差错：1 可能会变成 0 ，0 也可能变成 1。

在一段时间内，传输错误的比特占所传输比特总数的比率称为误码率 BER (Bit Error Rate)。

误码率与信噪比有很大的关系。

为了保证数据传输的可靠性，在计算机网络传输数据时，必须采用各种差错检测措施。 

在数据链路层传送的帧中，广泛使用了循环冗余检验 CRC 的检错技术。

## 循环冗余检验的原理

CRC检验也称为多项式编码（Polynomial Code），它将发送的二进制序列看作系数为0或1的一个多项式，对二进制序列的操作也称为多项式算术。CRC校验码由两部分组成，前一部分是k+1个比特的待发送信息，后一部分是r个比特的冗余码。前k+1个比特部分是实际要传送的内容，是固定不变的。CRC校验码的关键在于后一部分r个比特冗余码的计算。

多项式算术是基于二进制序列与多项式系数的对应（等价）关系进行的。一个m+1位的二进制序列就是一个m阶多项式的系数，如二进制序列p=1101， 则其对应的多项式 ：
$$
P(x)=x^3+x^2+1
$$
CRC冗余码的计算中要用到两个多项式： F(x)和G(x) ，其中， F(x)是一个k阶多项式，其系数是待发送的k+1位二进制序列， G(x)是一个r阶的生成多项式，由收发双方预先约定。

![](https://img1.zlogs.net/19/20191105011149.png)

![](https://img1.zlogs.net/19/20191105011327.png)

CRC校验具有很强的检错能力，理论证明，CRC能够检验出下列差错：全部的奇数个错。全部的两位错。全部长度小于或等于r位的突发错。其中，r是冗余码的长度。

可以看出，只要选择足够的冗余位，就可以使漏检率减少到任意小的程度。由于CRC校验码的检错能力强，且生成和检验过程容易实现，因此是目前应用最广泛的检错码编码方法之一。



-------------

1. 在发送端，先把数据划分为组（即：一帧）。假定每组 k 个比特。
2. 在每组后面，添加供差错检测用的 n 位冗余码一起发送。即：实际发送长度为：k+n 比特。
3. 发送前双方协商n+1位的除数P，方便接收方收到后校验。
4. 给K比特的数据添加除数减一个0（P-1）作为被除数，与第三步确定的除数做“模2除法”。得出的余数即FCS校验序列，它的位数也必须是（P-1）。
5. 将FCS校验序列添加至K个比特位的后面发送出去。
6. 接收方对接收到的每一帧进行校验，若得出的余数 R = 0，则判定这个帧没有差错，就接受(accept)。若余数 R ≠ 0，则判定这个帧有差错，就丢弃。

> “模2除法”与“算术除法”类似，但它既不向上位借位，也不比较除数和被除数的相同位数值的大小，只要以相同位数进行相除即可。模2加法运算为：1+1=0，0+1=1，0+0=0，无进位，也无借位；模2减法运算为：1-1=0，0-1=1，1-0=1，0-0=0，也无进位，无借位。相当于二进制中的逻辑异或运算。



![](https://img1.zlogs.net/19/20191105011750.png)

那么接收方拿到的就是：101001001。再以它为被除数，1101为除数进行“模2除法”。

























参考

+ https://blog.csdn.net/pointer_y/article/details/60332956





















