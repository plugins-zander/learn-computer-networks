# IP地址

## IP地址概述

### IP地址定义

IP 地址就是给每个连接在因特网上的主机（或路由器）分配一个在全世界范围内惟一的标识符。

IP 地址现在由因特网名字与号码分配机构（Internet Corporation for Assigned Names and Numbers ，ICANN）进行分配。

根据IP地址的长度不同，IP地址主要有两种版本：一是IPv4，长度为32bit；二是IPv6，长度为128bit。



### IP 地址的编址方法

- 分类的IP地址
  - 最基本的编址方法，在 1981 年通过了相应的标准协议。
- 子网地址
  - 对最基本编址方法的改进，其标准[RFC 950]在 1985 年通过。
- 超网（CIDR地址）
  - 比较新的无分类编址方法，1993 年提出后很快得到推广应用。
- IPv6
  - 128bit的地址。



### IP地址编制方案的演变过程

![](https://cdn.jsdelivr.net/gh/ZanderZhao/img20/file/20191022080801.png)



### IP地址的组成

#### IPv4

目前使用的IPv4是由32bit组成，每8位为一组，中间采用点”.”隔开，分别形成IP地址的网络地址和主机地址部分。为了便于记忆，一般采用点分十进制记法 。

![](https://cdn.jsdelivr.net/gh/ZanderZhao/img20/file/20191022080926.png)

点分十进制标记法：将32Bit的二进制数值转换成4个十进制数值，每个十进制数值小于等于255，4个十进制数值间用“.”隔开

![](https://cdn.jsdelivr.net/gh/ZanderZhao/img20/file/20191022081303.png)

例子

![](https://cdn.jsdelivr.net/gh/ZanderZhao/img20/file/20191105210234.png)

二进制IP地址

![](https://cdn.jsdelivr.net/gh/ZanderZhao/img20/file/20191105210253.png)用点分十进制表示法表示成		

202.93.120.44	



#### IPv6

IPv6是由128bit组成，每16位为一组，中间采用点”：”隔开。为便于记忆，一般采用冒分十六进制记法表示。

如：68E6:8C64:FFFF:FFFF:0:1180:960A:FFF8

IPv6也有两部分组成：可变长度的类型前缀和其余部分。

## IPv4

### IP地址的分类

根据RFC1166的说明，IPv4的地址主要分为5类

- A类地址1～126
  - 用于主机数目非常多的大型或特大型网络。
- B类地址128 ～ 191
  - 用于中型到大型网络。
- C类地址192 ～ 223
  - 主要用于局域网。
- D类地址224 ～ 239
  - 用作多目广播，多址发送。
- E类地址240 ～ 255
  - 保留未用（作为实验地址）。



### 分类IP地址的特征

IP地址 ::= { <网络号>, <主机号>}

![](https://cdn.jsdelivr.net/gh/ZanderZhao/img20/file/20191223144150.png)

|      | 根据网络地址中第一字节的取值范围，可以确定IP地址所属的类别 |                |
| ---- | ---------------------------------------------------------- | -------------- |
| A类  | 0 + NETid（7位）0-127                                      | HOSTid（24位） |
| B类  | 1  0 + NETid（14位）128-191                                | HOSTid（16位） |
| C类  | 1  1  0 + NETid（21位）192-233                             | HOSTid(8位)    |
| D类  | 1  1  1  0 + 多目发送地址（28位）224 ～ 239                |                |
| E类  | 1  1  1  1  0   240 ～ 255                                 | 保留未用       |

### IPv4地址的使用范围

![](https://cdn.jsdelivr.net/gh/ZanderZhao/img20/file/20191223145130.png)

### IP地址的定址准则

- 网络地址在INTERNET中必须是唯一的，在相同网络地址范围内，主机地址也必须是唯一的
- 网络地址不能是127，因为127地址用作本地回送地址
  - 为每台主机本地所有，仅代表本地主机，不能用来分配。
  - 一般使用127.0.0.1这个地址。
  - 含有网络号127的数据报不可能出现在网络上。
- 网络地址部分和主机地址部分的每一位（Bit）不能全为0，也不能全为1
  - 网络地址
    - 全为0，该地址代表当前网络（this），不能传送
      - 如：192.168.0.3为一台主机。而0.0.0.3代表当前网络（泛指）中主机地址为3的这台主机。
    - 全为1( 255)，广播地址（all）
      - 如：255.255.255.255用于本网广播，也叫有限广播。
  - 主机地址
    - 全为0 ，代表整个网络，即主机所连接的网络地址
      - 如192.168.0.3对应的网络为192.168.0.0
    - 全为1( 255) ，广播地址，代表网络上的所有主机
      - 如192.168.0.255表示连接在网络192.168.0上的所有主机

### 可分配IP地址的分配方法

- 

  ![img](https://cdn.jsdelivr.net/gh/ZanderZhao/img20/file/20200115191421.png)

### IP地址的分配方案

- RFC1466（公共网IP地址分配）

  ![img](https://cdn.jsdelivr.net/gh/ZanderZhao/img20/file/20200115191422.png)

- RFC1918（专用网IP地址分配）

  - IP地址
    - 全局（公共）IP地址―――公共主机
    - 本地（专用）IP地址―――本地主机
  - RFC1918定义的专用IP地址如下：
    - 10.0.0.0      －10.255.255.255       1个A类地址
    - 172.16.0.0  －172.31.255.255       16个连续的B类地址
    - 192.168.0.0－192.168.255.255     256个连续的C类地址
  - 自动专用IP地址（APIPA）
    - 169.254.0.1-169.254.255.254      单个子网自动配置

### IP分配需注意的问题

- 小型网络使用C类地址，中型网络使用B类地址，大型网络使用A类地址
- 主机
  - 连接到同一网络中所有主机的IP地址共享同一netid
- 路由器
  - 路由器可以连接多个物理网络
  - 每个连接都拥有自己的IP地址
  - 每个IP地址的netid应与连接网络的netid相同



### IP地址的规划

通常IP地址的规划可参照下面步骤进行：

- （1）分析网络规模，明确网络中所拥有的网段数量以及每个网段中可能拥有的最大主机数。

- （2）根据网络规模确定所需要的网络类别和每类网络的数量。

- （3）确定使用公用地址、私有地址还是两者混用。

- （4）根据可用的地址资源为每台主机指定IP地址并在主机上进行相应的配置，在配置地址之前，还要考虑地址分配的方式。（静态分配、动态分配）

  

编址实例（3个C类地址，一个B类地址）

![img](https://cdn.jsdelivr.net/gh/ZanderZhao/img20/file/20200115191423.png)

| IP地址               | 200.198.3.15    | 130.201.5.18    |
| -------------------- | --------------- | --------------- |
| 网络地址             | 200.198.3.0     | 130.201.0.0     |
| 该网络的直接广播地址 | 200.198.3.255   | 130.201.255.255 |
| 有限广播地址         | 255.255.255.255 | 255.255.255.255 |
| 回送地址             | 127.0.0.1       | 127.0.0.1       |





















